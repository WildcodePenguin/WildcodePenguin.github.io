<!DOCTYPE html>
<html>
<head>
  <title>Color Generator</title>
  <style>
    .color-container {
      display: flex;
      justify-content: center;
    }
    .color-square {
      width: 200px;
      height: 200px;
      margin: 0 10px;
      font-size: 64px;
    }
  </style>
</head>
<body>
  <div class="color-container">
    <div id="originalColorSquare" class="color-square"><output style="background-color: #ffffff;">元の色</output></div>
    <div id="modifiedColor1" class="color-square" data-attribute=""><output style="background-color: #ffffff;">①</output><select id="example1" style="zoom: 4;background-color: #ffffff;"><option value="" selected disabled>選べ</option><option value="R">赤</option><option value="G">緑</option><option value="B">青</option></select></div>
    <div id="modifiedColor2" class="color-square" data-attribute=""><output style="background-color: #ffffff;">②</output><select id="example2" style="zoom: 4;background-color: #ffffff;"><option value="" selected disabled>選べ</option><option value="R">赤</option><option value="G">緑</option><option value="B">青</option></select></div>
    <div id="modifiedColor3" class="color-square" data-attribute=""><output style="background-color: #ffffff;">③</output><select id="example3" style="zoom: 4;background-color: #ffffff;"><option value="" selected disabled>選べ</option><option value="R">赤</option><option value="G">緑</option><option value="B">青</option></select></div>
  </div><h1>レベル選択</h1>
  <select id="incrementValue" onchange="updateColorSquares()"></select>

  <script>
    var select = document.getElementById('incrementValue');
    document.getElementById('incrementValue').style.zoom = 4;
    var min = 1;
    var max = 30;
  
    for (var i = min; i <= max; i++) {
      var option = document.createElement('option');
      option.value = max-i;
      option.textContent = i;
      select.appendChild(option);
    }
  </script>
  
  <button onclick="showColorOrder()" style="zoom: 4;">結果発表</button>
<div style="zoom: 2;">ルール説明<br>・この問題は、もとの色に赤、緑、青のいずれか１つを増やした色が①②③にランダムに並んでいるので左から順に増やした色を答えるゲームです。<br>・日本語がわからない</div>
  <script>
    var colorOrder = ['modifiedColor1', 'modifiedColor2', 'modifiedColor3'];

    function generateRandomColor() {
      var color = '#' + Math.floor(Math.random() * 16777215).toString(16);
      return color;
    }

    function generateModifiedColor(color, r, g, b) {
      var originalR = parseInt(color.slice(1, 3), 16);
      var originalG = parseInt(color.slice(3, 5), 16);
      var originalB = parseInt(color.slice(5, 7), 16);

      var modifiedR = (originalR + r) % 256;
      var modifiedG = (originalG + g) % 256;
      var modifiedB = (originalB + b) % 256;

      modifiedR = Math.max(modifiedR, 0); // 負の値を0に制限
      modifiedG = Math.max(modifiedG, 0); // 負の値を0に制限
      modifiedB = Math.max(modifiedB, 0); // 負の値を0に制限

      return '#' + modifiedR.toString(16).padStart(2, '0') +
             modifiedG.toString(16).padStart(2, '0') +
             modifiedB.toString(16).padStart(2, '0');
    }

    function shuffleColorOrder() {
      colorOrder.sort(() => Math.random() - 0.5);
      updateColorSquares();
    }

    function showColorOrder() {
      var orderedColors = colorOrder.map((colorId) => {
        return document.getElementById(colorId).getAttribute('data-attribute');
      });
      var selected1 = document.getElementById('example1').value;
      var selected2 = document.getElementById('example2').value;
      var selected3 = document.getElementById('example3').value;
      var selecteds = selected1 + ", " + selected2 + ", " + selected3;
      var answer = orderedColors.join(', ');
      if (selected1 != ""&&selected2 != ""&&selected3 != ""){
            if (selecteds==answer) {
                alert('やったー！正解だよ♪\n\nあなたの回答: '+selecteds+'\n実際の正答: ' +answer); 
            } else {
                alert('おい、間違っとるぞ！お前の目は節穴か？\n\nあなたの回答: '+selecteds+'\n実際の正答: ' + answer);
            }
      } else {
        alert("選んでないよ！");
      }

    }

    function updateColorSquares() {
      Math.random(); // シード値を更新

      var originalColor = generateRandomColor();
      var increment = parseInt(document.getElementById('incrementValue').value);

      var attributes = ['R', 'G', 'B'];
      var shuffledAttributes = shuffleArray(attributes);

      var modifiedColor1 = generateModifiedColor(originalColor, increment * (shuffledAttributes.indexOf('R') === 0 ? 1 : 0), increment * (shuffledAttributes.indexOf('G') === 0 ? 1 : 0), increment * (shuffledAttributes.indexOf('B') === 0 ? 1 : 0));
      var modifiedColor2 = generateModifiedColor(originalColor, increment * (shuffledAttributes.indexOf('R') === 1 ? 1 : 0), increment * (shuffledAttributes.indexOf('G') === 1 ? 1 : 0), increment * (shuffledAttributes.indexOf('B') === 1 ? 1 : 0));
      var modifiedColor3 = generateModifiedColor(originalColor, increment * (shuffledAttributes.indexOf('R') === 2 ? 1 : 0), increment * (shuffledAttributes.indexOf('G') === 2 ? 1 : 0), increment * (shuffledAttributes.indexOf('B') === 2 ? 1 : 0));

      document.getElementById('originalColorSquare').style.backgroundColor = originalColor;
      document.getElementById('modifiedColor1').style.backgroundColor = modifiedColor1;
      document.getElementById('modifiedColor2').style.backgroundColor = modifiedColor2;
      document.getElementById('modifiedColor3').style.backgroundColor = modifiedColor3;

      document.getElementById('modifiedColor1').setAttribute('data-attribute', shuffledAttributes[0]);
      document.getElementById('modifiedColor2').setAttribute('data-attribute', shuffledAttributes[1]);
      document.getElementById('modifiedColor3').setAttribute('data-attribute', shuffledAttributes[2]);
    }

    function shuffleArray(array) {
      var currentIndex = array.length;
      var temporaryValue, randomIndex;

      while (0 !== currentIndex) {
        randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex -= 1;

        temporaryValue = array[currentIndex];
        array[currentIndex] = array[randomIndex];
        array[randomIndex] = temporaryValue;
      }

      return array;
    }

    updateColorSquares();
  </script>
</body>
</html>
