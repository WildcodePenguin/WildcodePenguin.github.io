<!DOCTYPE html>
<html>
<head>
  <title>音声入力のデモ</title>
</head>
<body>
  <button onclick="startSpeechRecognition()">音声入力を開始</button>
  <div id="transcription"></div>

  <script>// 音声認識オブジェクトを初期化
    const recognition = new webkitSpeechRecognition();
    
    // 認識結果の表示先の要素を取得
    const transcription = document.getElementById('transcription');
    
    // 認識結果の表示先の要素をクリアする関数
    function clearTranscription() {
      transcription.innerHTML = '';
    }
    
    // 音声認識を開始する関数
    function startSpeechRecognition() {
      // 認識結果をインターミディエイトモード（途中経過も取得）で設定
      recognition.interimResults = true;
    
      // 認識開始時のイベントリスナを設定
      recognition.onstart = function() {
        clearTranscription();
      };
    
      // 認識途中のイベントリスナを設定
      recognition.onresult = function(event) {
        let interimTranscript = '';
        let finalTranscript = '';
    
        // 認識結果を取得
        for (let i = event.resultIndex; i < event.results.length; i++) {
          const transcript = event.results[i][0].transcript;
          if (event.results[i].isFinal) {
            finalTranscript += transcript;
          } else {
            interimTranscript += transcript;
          }
        }
    
        // 途中経過と最終結果を表示
        transcription.innerHTML = finalTranscript;
      };
    
      // 音声認識を開始
      recognition.start();
    }
    </script>
</body>
</html>
